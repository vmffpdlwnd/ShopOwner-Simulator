<!-- Components/Layout/Navigation.razor -->
@inject NavigationManager NavManager
@inject GameState GameState

<nav class="nav-menu">
    <ul class="nav-list">
        <li class="nav-item">
            <NavLink href="/" Match="NavLinkMatch.All">
                <span class="icon">ğŸ </span>
                <span class="label">ëŒ€ì‹œë³´ë“œ</span>
            </NavLink>
        </li>
        <li class="nav-item">
            <NavLink href="/mining" Match="NavLinkMatch.Prefix">
                <span class="icon">ğŸ—º</span>
                <span class="label">íƒí—˜</span>
            </NavLink>
        </li>
        <li class="nav-item">
            <NavLink href="/crafting" Match="NavLinkMatch.Prefix">
                <span class="icon">ğŸ”¨</span>
                <span class="label">ì œì‘</span>
            </NavLink>
        </li>
        <li class="nav-item">
            <NavLink href="/personal-shop" Match="NavLinkMatch.Prefix">
                <span class="icon">ğŸ’¼</span>
                <span class="label">ê°œì¸ìƒì </span>
            </NavLink>
        </li>
        <li class="nav-item">
            <NavLink href="/exchange" Match="NavLinkMatch.Prefix">
                <span class="icon">ğŸ“ˆ</span>
                <span class="label">ê±°ë˜ì†Œ</span>
            </NavLink>
        </li>
        <li class="nav-item">
            <NavLink href="/inventory" Match="NavLinkMatch.Prefix">
                <span class="icon">ğŸ’</span>
                <span class="label">ì¸ë²¤í† ë¦¬</span>
            </NavLink>
        </li>
        <li class="nav-item">
            <NavLink href="/mercenary" Match="NavLinkMatch.Prefix">
                <span class="icon">âš”ï¸</span>
                <span class="label">ìš©ë³‘</span>
            </NavLink>
        </li>
        <li class="nav-item">
            <NavLink href="/tavern" Match="NavLinkMatch.Prefix">
                <span class="icon">ğŸº</span>
                <span class="label">ì£¼ì </span>
            </NavLink>
        </li>
        <li class="nav-item">
                <NavLink href="/general-shop" Match="NavLinkMatch.Prefix">
                <span class="icon">ğŸª</span>
                <span class="label">ìƒì </span>
            </NavLink>
        </li>
        <li class="nav-item">
            @if (GameState != null && GameState.IsInitialized)
            {
                <a href="#" @onclick="Logout">
                    <span class="icon">ğŸšª</span>
                    <span class="label">ë¡œê·¸ì•„ì›ƒ</span>
                </a>
            }
            else
            {
                <NavLink href="/login" Match="NavLinkMatch.Prefix">
                    <span class="icon">ğŸ”</span>
                    <span class="label">ë¡œê·¸ì¸</span>
                </NavLink>
            }
        </li>
    </ul>
</nav>

<style>
    .nav-menu {
        height: 100%;
        padding: 0;
    }

    .nav-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .nav-item {
        margin: 0;
    }

    .nav-item a {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        text-decoration: none;
        color: inherit;
        border-radius: 0.375rem;
        transition: background-color 0.2s;
    }

    .nav-item a:hover {
        background-color: rgba(0, 0, 0, 0.05);
    }

    .nav-item a.active {
        background-color: #007bff;
        color: white;
        font-weight: 600;
    }

    .icon {
        font-size: 1.25rem;
        width: 1.5rem;
        text-align: center;
    }

    .label {
        flex: 1;
    }

    @@media (max-width: 768px) {
        .nav-list {
            flex-direction: row;
            overflow-x: auto;
            gap: 0;
        }

        .nav-item a {
            flex-direction: column;
            padding: 0.5rem;
        }

        .label {
            font-size: 0.75rem;
        }
    }
</style>

@code {
    private async Task Logout()
    {
        try
        {
            await GameState.LogoutAsync();
            NavManager.NavigateTo("/login", true);
        }
        catch (Exception ex)
        {
            Console.Error.WriteLine($"Logout failed: {ex}");
        }
    }
}