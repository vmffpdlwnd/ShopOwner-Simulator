@page
@model IndexModel
@{
    ViewData["Title"] = "가게주인 시뮬레이터";
}

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>가게주인 시뮬레이터</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 15px;
        }

        .header h1 {
            font-size: 2.5em;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: 10px;
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: rgba(50, 50, 50, 0.8);
            border: 1px solid #ffd700;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
        }

        .stat-box .label {
            color: #aaa;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .stat-box .value {
            font-size: 1.5em;
            color: #ffd700;
            font-weight: bold;
        }

        .time-indicator {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            gap: 10px;
        }

        .time-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid #ffd700;
            background: rgba(50, 50, 50, 0.8);
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .time-btn.active {
            background: #ffd700;
            color: #000;
        }

        .time-btn:hover {
            background: rgba(255, 215, 0, 0.2);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: rgba(40, 40, 40, 0.9);
            border: 1px solid #666;
            border-radius: 5px;
            padding: 15px;
        }

        .panel h2 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 1px solid #666;
            padding-bottom: 10px;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .menu-btn {
            background: rgba(50, 50, 50, 0.8);
            border: 1px solid #666;
            color: #fff;
            padding: 12px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            text-align: left;
        }

        .menu-btn:hover {
            background: rgba(100, 100, 100, 0.8);
            border-color: #ffd700;
            color: #ffd700;
        }

        .menu-btn.active {
            background: rgba(255, 215, 0, 0.2);
            border-color: #ffd700;
            color: #ffd700;
        }

        .content-area {
            grid-column: 1 / -1;
            background: rgba(40, 40, 40, 0.9);
            border: 1px solid #666;
            border-radius: 5px;
            padding: 20px;
            min-height: 300px;
        }

        .content-area h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .item-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .item-card {
            background: rgba(60, 60, 60, 0.8);
            border: 1px solid #555;
            border-radius: 5px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .item-card:hover {
            border-color: #ffd700;
            background: rgba(80, 80, 80, 0.8);
        }

        .item-name {
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .item-price {
            color: #aaa;
            font-size: 0.9em;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .action-btn {
            flex: 1;
            padding: 12px 20px;
            background: #ffd700;
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background: #ffed4e;
            transform: scale(1.05);
        }

        .action-btn:disabled {
            background: #666;
            color: #aaa;
            cursor: not-allowed;
            transform: scale(1);
        }

        .info-text {
            color: #aaa;
            font-size: 0.9em;
            line-height: 1.6;
            margin: 10px 0;
        }

        .hidden {
            display: none;
        }

        @@media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .game-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏪 가게주인 시뮬레이터</h1>
            <p>자원을 모아 아이템을 제작하고 팔아 부자가 되자!</p>
        </div>

        <!-- 게임 상태 -->
        <div class="game-stats">
            <div class="stat-box">
                <div class="label">시간</div>
                <div class="value" id="currentTime">아침 08:00</div>
            </div>
            <div class="stat-box">
                <div class="label">골드</div>
                <div class="value" id="playerGold">0G</div>
            </div>
            <div class="stat-box">
                <div class="label">레벨</div>
                <div class="value" id="playerLevel">1</div>
            </div>
        </div>

        <!-- 시간 선택 -->
        <div class="time-indicator">
            <button class="time-btn active" onclick="switchTime('morning', this)">☀️ 아침</button>
            <button class="time-btn" onclick="switchTime('evening', this)">🌙 저녁</button>
        </div>

        <!-- 메인 콘텐츠 -->
        <div class="main-content">
            <!-- 왼쪽 패널: 상점 -->
            <div class="panel">
                <h2>🏪 상점</h2>
                <p class="info-text">NPC 상점에서 필요한 물품을 구매하세요.<br>상점은 24시간마다 갱신됩니다.</p>
                <div class="menu-buttons">
                    <button class="menu-btn active" onclick="showSection('shop', this)">물품 구매</button>
                    <button class="menu-btn" onclick="showSection('myShop', this)">내 상점</button>
                </div>
            </div>

            <!-- 오른쪽 패널: 메뉴 -->
            <div class="panel">
                <h2>⚔️ 모험</h2>
                <p class="info-text">던전을 탐험하고 자원을 수집하세요.</p>
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="showSection('dungeon', this)">던전 탐험</button>
                    <button class="menu-btn" onclick="showSection('inventory', this)">인벤토리</button>
                    <button class="menu-btn" onclick="showSection('crafting', this)">아이템 제작</button>
                    <button class="menu-btn" onclick="showSection('marketplace', this)">거래소</button>
                    <button class="menu-btn" onclick="showSection('characters', this)">용병 관리</button>
                </div>
            </div>
        </div>

        <!-- 콘텐츠 영역 -->
        <div class="content-area">
            <!-- 상점 섹션 -->
            <div id="shop-section" class="content-section">
                <h3>🏪 물품 구매</h3>
                <p class="info-text">상점 재고 변경: 내일 08:00</p>
                <div class="item-list" id="shopItems">
                    <!-- 동적으로 생성됨 -->
                </div>
            </div>

            <!-- 내 상점 섹션 -->
            <div id="myShop-section" class="content-section hidden">
                <h3>📊 내 상점 현황</h3>
                <div class="info-text">
                    <p>어제 판매 수익: <span id="yesterdayRevenue" style="color: #ffd700;">0G</span></p>
                    <p>용병 급여: <span id="mercenaryWage" style="color: #ff6b6b;">0G</span></p>
                    <p>총 자산: <span id="totalAsset" style="color: #51cf66;">0G</span></p>
                </div>
            </div>

            <!-- 던전 섹션 -->
            <div id="dungeon-section" class="content-section hidden">
                <h3>⚔️ 던전 탐험</h3>
                <p class="info-text">용병을 선택하고 던전을 탐험하세요.</p>
                <div class="item-list" id="dungeonList">
                    <!-- 동적으로 생성됨 -->
                </div>
                <div class="action-buttons">
                    <button class="action-btn" onclick="exploreDungeon()">탐험 시작</button>
                </div>
            </div>

            <!-- 인벤토리 섹션 -->
            <div id="inventory-section" class="content-section hidden">
                <h3>🎒 인벤토리</h3>
                <p class="info-text">보유 자원 및 아이템</p>
                <div id="inventoryList">
                    <!-- 동적으로 생성됨 -->
                </div>
            </div>

            <!-- 아이템 제작 섹션 -->
            <div id="crafting-section" class="content-section hidden">
                <h3>🔨 아이템 제작</h3>
                <p class="info-text">자원을 조합하여 아이템을 제작하세요.</p>
                <div id="craftingList">
                    <!-- 동적으로 생성됨 -->
                </div>
            </div>

            <!-- 거래소 섹션 -->
            <div id="marketplace-section" class="content-section hidden">
                <h3>💰 거래소</h3>
                <p class="info-text">플레이어와 아이템을 거래하세요.</p>
                <div id="marketplaceList">
                    <!-- 동적으로 생성됨 -->
                </div>
            </div>

            <!-- 용병 관리 섹션 -->
            <div id="characters-section" class="content-section hidden">
                <h3>⚔️ 용병 관리</h3>
                <p class="info-text">용병을 고용하고 관리하세요.</p>
                <div id="charactersList">
                    <!-- 동적으로 생성됨 -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // 게임 상태
        let gameState = {
            playerGold: 5000,
            playerLevel: 1,
            currentTime: 'morning',
            inventory: {
                wood: 10,
                iron: 5,
                stone: 3
            },
            characters: [],
            revenue: 0
        };

        // 초기화
        function init() {
            updateUI();
            loadShopItems();
            loadDungeonList();
            loadInventory();
            loadCraftingList();
        }

        // UI 업데이트
        function updateUI() {
            document.getElementById('currentTime').textContent = gameState.currentTime === 'morning' ? '아침 08:00' : '저녁 20:00';
            document.getElementById('playerGold').textContent = gameState.playerGold.toLocaleString() + 'G';
            document.getElementById('playerLevel').textContent = gameState.playerLevel;
        }

        // 시간 전환
        function switchTime(time, el) {
            gameState.currentTime = time;
            document.querySelectorAll('.time-btn').forEach(btn => btn.classList.remove('active'));
            if (el) el.classList.add('active');
            updateUI();
        }

        // 섹션 표시
        function showSection(sectionName, el) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionName + '-section').classList.remove('hidden');

            document.querySelectorAll('.menu-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            if (el) el.classList.add('active');
        }

        // 상점 아이템 로드
        function loadShopItems() {
            const shopItems = [
                { id: 1, name: '초급 전사', price: 1000, type: 'character' },
                { id: 2, name: '철 (x10)', price: 100, type: 'resource' },
                { id: 3, name: '포션 (x5)', price: 50, type: 'item' },
                { id: 4, name: '나무 검', price: 300, type: 'equipment' }
            ];

            const shopContainer = document.getElementById('shopItems');
            shopContainer.innerHTML = shopItems.map(item => `
                <div class="item-card" onclick="buyItem(${item.id})">
                    <div class="item-name">${item.name}</div>
                    <div class="item-price">${item.price}G</div>
                </div>
            `).join('');
        }

        // 던전 리스트 로드
        function loadDungeonList() {
            const dungeons = [
                { id: 1, name: '숲', difficulty: '⭐', reward: '목재' },
                { id: 2, name: '광산', difficulty: '⭐⭐', reward: '철' },
                { id: 3, name: '동굴', difficulty: '⭐⭐⭐', reward: '석재' }
            ];

            const dungeonContainer = document.getElementById('dungeonList');
            dungeonContainer.innerHTML = dungeons.map(dungeon => `
                <div class="item-card" onclick="selectDungeon(${dungeon.id})">
                    <div class="item-name">${dungeon.name}</div>
                    <div class="item-price">난이도: ${dungeon.difficulty}</div>
                </div>
            `).join('');
        }

        // 인벤토리 로드
        function loadInventory() {
            const inventoryContainer = document.getElementById('inventoryList');
            const items = Object.entries(gameState.inventory).map(([key, value]) => ({
                name: key.charAt(0).toUpperCase() + key.slice(1),
                count: value
            }));

            inventoryContainer.innerHTML = items.map(item => `
                <div class="info-text">
                    ${item.name}: <span style="color: #ffd700;">${item.count}개</span>
                </div>
            `).join('');
        }

        // 제작 리스트 로드
        function loadCraftingList() {
            const recipes = [
                { id: 1, name: '철 검', recipe: '목재 2 + 철 3', result: '철 검', price: 500 },
                { id: 2, name: '나무 방패', recipe: '목재 5 + 석재 2', result: '나무 방패', price: 300 }
            ];

            const craftingContainer = document.getElementById('craftingList');
            craftingContainer.innerHTML = recipes.map(recipe => `
                <div class="item-card" onclick="craftItem(${recipe.id})">
                    <div class="item-name">${recipe.name}</div>
                    <div class="item-price">${recipe.recipe}</div>
                </div>
            `).join('');
        }

        // 아이템 구매
        function buyItem(itemId) {
            alert('아이템 ' + itemId + '를 구매했습니다!');
            gameState.playerGold -= 100;
            updateUI();
        }

        // 던전 탐험
        function exploreDungeon() {
            alert('던전을 탐험 중입니다...');
            gameState.playerGold += 500;
            gameState.inventory.wood += 5;
            updateUI();
            loadInventory();
        }

        // 아이템 제작
        function craftItem(itemId) {
            alert('아이템을 제작했습니다!');
            gameState.playerGold += 500;
            updateUI();
        }

        // 페이지 로드 시 초기화
        window.onload = init;
    </script>
</body>
</html>